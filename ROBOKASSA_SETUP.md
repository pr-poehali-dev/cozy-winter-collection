# ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Result URL –≤ Robokassa

## –ü—Ä–æ–±–ª–µ–º–∞
–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–æ–≤ –æ—Å—Ç–∞—ë—Ç—Å—è `pending` –¥–∞–∂–µ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ **Robokassa –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–ª–∞—Ç–µ–∂–µ**.

## –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –í–æ–π–¥–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç Robokassa

1. –û—Ç–∫—Ä–æ–π: https://auth.robokassa.ru/Merchant/Index.aspx
2. –í–æ–π–¥–∏ —Å –ª–æ–≥–∏–Ω–æ–º –º–∞–≥–∞–∑–∏–Ω–∞

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π Result URL

1. –ü–µ—Ä–µ–π–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª **"–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"** ‚Üí **"Result URL"**
2. –í–∫–ª—é—á–∏ **"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Result URL –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–∞–≥–∞–∑–∏–Ω–∞"**
3. –£–∫–∞–∂–∏ Result URL (–º–µ—Ç–æ–¥ 1):
   ```
   https://functions.poehali.dev/5420828a-4f2b-45e0-908f-6d59922e7791
   ```

4. –ò–ª–∏ Result URL (–º–µ—Ç–æ–¥ 2) —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
   ```
   https://functions.poehali.dev/5420828a-4f2b-45e0-908f-6d59922e7791?OutSum=&InvId=&SignatureValue=
   ```

5. **–ú–µ—Ç–æ–¥ –æ—Ç–ø—Ä–∞–≤–∫–∏**: –≤—ã–±–µ—Ä–∏ `POST` –∏–ª–∏ `GET` (—Ñ—É–Ω–∫—Ü–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞)

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å Success URL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

Success URL ‚Äî —ç—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã:
```
https://azaluk.shop/order-success
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook

### –í—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∏—Ç—å webhook:

**GET –∑–∞–ø—Ä–æ—Å:**
```
https://functions.poehali.dev/5420828a-4f2b-45e0-908f-6d59922e7791?OutSum=100.00&InvId=12345&SignatureValue=–¢–ï–°–¢–û–í–ê–Ø_–ü–û–î–ü–ò–°–¨
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏:**
```
Invalid signature
```

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–æ–¥–ø–∏—Å—å –¥–ª—è —Ç–µ—Å—Ç–∞:
1. –í–æ–∑—å–º–∏ —Ä–µ–∞–ª—å–Ω—ã–π `robokassa_inv_id` –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä: 1477814496)
2. –í–æ–∑—å–º–∏ —Å—É–º–º—É –∑–∞–∫–∞–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 10.00)
3. –ü–æ–¥–ø–∏—Å—å = MD5(OutSum:InvId:Password2)

–ò–ª–∏ —Å–¥–µ–ª–∞–π —Ä–µ–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ –≤ Robokassa.

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Result URL:
1. –°–¥–µ–ª–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
2. –û–ø–ª–∞—Ç–∏ –µ–≥–æ –≤ Robokassa
3. –ü—Ä–æ–≤–µ—Ä—å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Robokassa —Ä–∞–∑–¥–µ–ª **"–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π"**
4. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: ‚úÖ Result URL –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ

---

## ‚öôÔ∏è –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **Result URL** | https://functions.poehali.dev/5420828a-4f2b-45e0-908f-6d59922e7791 |
| **Success URL** | https://azaluk.shop/order-success |
| **Merchant Login** | *(–∏–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤)* |
| **Password 1** | *(–¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏ –æ–ø–ª–∞—Ç—ã)* |
| **Password 2** | *(–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Result URL)* |

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ webhook —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏
curl https://functions.poehali.dev/5420828a-4f2b-45e0-908f-6d59922e7791
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: `Missing required parameters`

### –ü—Ä–æ–≤–µ—Ä—å –∑–∞–∫–∞–∑—ã –≤ –ë–î:

```sql
SELECT 
    id, 
    order_number, 
    status, 
    robokassa_inv_id, 
    created_at, 
    paid_at 
FROM t_p3876556_cozy_winter_collecti.orders 
ORDER BY created_at DESC 
LIMIT 10;
```

–ï—Å–ª–∏ `paid_at = NULL` –∏ —Å—Ç–∞—Ç—É—Å `pending` ‚Äî –∑–Ω–∞—á–∏—Ç Result URL –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª.

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- [ ] –í–æ–π–¥–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç Robokassa
- [ ] –í–∫–ª—é—á–∏ Result URL
- [ ] –£–∫–∞–∂–∏ URL: `https://functions.poehali.dev/5420828a-4f2b-45e0-908f-6d59922e7791`
- [ ] –°–æ—Ö—Ä–∞–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [ ] –°–¥–µ–ª–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ –Ω–∞ 10‚ÇΩ
- [ ] –û–ø–ª–∞—Ç–∏ –∑–∞–∫–∞–∑
- [ ] –ü—Ä–æ–≤–µ—Ä—å –≤ –ë–î —á—Ç–æ —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ `paid`
- [ ] –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø—Ä–∏—à–ª–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
- [ ] –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø—Ä–∏—à–ª–æ –ø–∏—Å—å–º–æ –Ω–∞ email

---

## üÜò –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä—å –ø–∞—Ä–æ–ª–∏ –≤ Robokassa
–í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Robokassa –µ—Å—Ç—å 2 –ø–∞—Ä–æ–ª—è:
- **Password #1** ‚Äî –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏ –æ–ø–ª–∞—Ç—ã
- **Password #2** ‚Äî –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Result URL

–£–±–µ–¥–∏—Å—å —á—Ç–æ –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏:
```
ROBOKASSA_PASSWORD_1 = Password #1 –∏–∑ Robokassa
ROBOKASSA_PASSWORD_2 = Password #2 –∏–∑ Robokassa
```

### 2. –ü—Ä–æ–≤–µ—Ä—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
–ï—Å–ª–∏ –º–∞–≥–∞–∑–∏–Ω –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, —É–∫–∞–∂–∏ `IsTest=1` –≤ —Å—Å—ã–ª–∫–µ –æ–ø–ª–∞—Ç—ã.
–≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `robokassa/index.py`.

### 3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ Robokassa
–í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ —Å–º–æ—Ç—Ä–∏ –∏—Å—Ç–æ—Ä–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –ø—Ä–æ–≤–µ—Ä—è–π –æ—Ç–ø—Ä–∞–≤–∫—É Result URL.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Robokassa

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:
- –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞: https://robokassa.ru/support/
- Email: support@robokassa.ru
- –¢–µ–ª–µ—Ñ–æ–Ω: 8-800-333-57-45
