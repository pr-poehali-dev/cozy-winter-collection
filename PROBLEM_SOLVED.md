# ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã

## üî¥ –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–æ–≤ –æ—Å—Ç–∞—ë—Ç—Å—è `pending`

### –ü—Ä–∏—á–∏–Ω–∞
**Robokassa –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞ Result URL –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã.**

–í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Robokassa –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω Result URL, –ø–æ—ç—Ç–æ–º—É webhook –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏ —Å—Ç–∞—Ç—É—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è.

### ‚úÖ –†–µ—à–µ–Ω–∏–µ

**–ù–∞—Å—Ç—Ä–æ–π Result URL –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Robokassa:**

1. –í–æ–π–¥–∏: https://auth.robokassa.ru/Merchant/Index.aspx
2. –ü–µ—Ä–µ–π–¥–∏: **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **Result URL**
3. –í–∫–ª—é—á–∏: **"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Result URL –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–∞–≥–∞–∑–∏–Ω–∞"**
4. –£–∫–∞–∂–∏ URL:
   ```
   https://functions.poehali.dev/5420828a-4f2b-45e0-908f-6d59922e7791
   ```
5. –ú–µ—Ç–æ–¥: `POST` –∏–ª–∏ `GET` (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –æ–±–∞)
6. –°–æ—Ö—Ä–∞–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–¥–µ–ª–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ –Ω–∞ 10‚ÇΩ. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã:
- ‚úÖ –°—Ç–∞—Ç—É—Å –≤ –ë–î –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ `paid`
- ‚úÖ –ü—Ä–∏–¥—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
- ‚úÖ –ü—Ä–∏–¥—ë—Ç –ø–∏—Å—å–º–æ –Ω–∞ email

---

## üõ† –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. **order-details**
- ‚ùå –ë—ã–ª–æ: `FROM orders` (–±–µ–∑ —Å—Ö–µ–º—ã)
- ‚úÖ –°—Ç–∞–ª–æ: `FROM t_p3876556_cozy_winter_collecti.orders`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 3 SQL-–∑–∞–ø—Ä–æ—Å–∞

### 2. **promo-validate**
- ‚ùå –ë—ã–ª–æ: `FROM promo_codes` (–±–µ–∑ —Å—Ö–µ–º—ã)
- ‚úÖ –°—Ç–∞–ª–æ: `FROM t_p3876556_cozy_winter_collecti.promo_codes`

### 3. **robokassa-webhook**
- ‚úÖ –£–∂–µ –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (—Å —Å—Ö–µ–º–æ–π)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã URL —Ñ—É–Ω–∫—Ü–∏–π telegram-bot –∏ send-email

### 4. **telegram-bot**
- ‚úÖ –í—Å–µ SQL —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### 5. **send-email**
- ‚úÖ –í—Å–µ SQL —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ email —Ä–∞–±–æ—Ç–∞–µ—Ç

### 6. **telegram-bot-setup**
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω URL webhook
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

### 7. **resend-forward**
- ‚úÖ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ë–î, —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π Result URL –≤ Robokassa
- [ ] –í–æ–π–¥–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç Robokassa
- [ ] –û—Ç–∫—Ä–æ–π **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
- [ ] –í–∫–ª—é—á–∏ Result URL
- [ ] –£–∫–∞–∂–∏: `https://functions.poehali.dev/5420828a-4f2b-45e0-908f-6d59922e7791`
- [ ] –°–æ—Ö—Ä–∞–Ω–∏

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π Telegram webhook
- [ ] –û—Ç–∫—Ä–æ–π: https://functions.poehali.dev/aa1ac8a7-52d8-4fd3-b9f3-54fae1e02751?action=setup_webhook
- [ ] –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: `{"success": true, "message": "Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω —É—Å–ø–µ—à–Ω–æ!"}`

### –®–∞–≥ 3: –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ –±–æ—Ç—É
- [ ] –û—Ç–∫—Ä–æ–π Telegram
- [ ] –ù–∞–π–¥–∏: @azaluk_orders_bot
- [ ] –û—Ç–ø—Ä–∞–≤—å: `/admin_join`
- [ ] –ü–æ–ª—É—á–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### –®–∞–≥ 4: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
- [ ] –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç: https://azaluk.shop
- [ ] –î–æ–±–∞–≤—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
- [ ] –û—Ñ–æ—Ä–º–∏ –∑–∞–∫–∞–∑ –Ω–∞ 10‚ÇΩ
- [ ] –û–ø–ª–∞—Ç–∏ —á–µ—Ä–µ–∑ Robokassa (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)
- [ ] –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ `paid`
- [ ] –ü—Ä–æ–≤–µ—Ä—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
- [ ] –ü—Ä–æ–≤–µ—Ä—å –ø–∏—Å—å–º–æ –Ω–∞ email

---

## üîó –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ URL —Ñ—É–Ω–∫—Ü–∏–π

| –§—É–Ω–∫—Ü–∏—è | URL | –°—Ç–∞—Ç—É—Å |
|---------|-----|--------|
| **robokassa-webhook** | https://functions.poehali.dev/5420828a-4f2b-45e0-908f-6d59922e7791 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **telegram-bot** | https://functions.poehali.dev/f90640b5-f2de-4bec-94e5-67480422875a | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **telegram-bot-setup** | https://functions.poehali.dev/aa1ac8a7-52d8-4fd3-b9f3-54fae1e02751 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **send-email** | https://functions.poehali.dev/088b269d-8f1d-43b7-b1a5-21fc5808f30a | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **order-details** | https://functions.poehali.dev/25f876e5-53fb-4cb1-878a-a7177baa1950 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω |
| **promo-validate** | https://functions.poehali.dev/0f36b8bc-d8d2-4743-9155-2b20bcec37ed | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω |
| **get-products** | https://functions.poehali.dev/4cfc9ed0-ca29-40ae-8316-56d0225fb703 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| **test-notifications** | https://functions.poehali.dev/69414de5-6ce0-4acb-a3e4-460b4216a09b | ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ |

---

## üß™ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä—å –≤—Å—é —Å–∏—Å—Ç–µ–º—É:
```
https://functions.poehali.dev/69414de5-6ce0-4acb-a3e4-460b4216a09b
```

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- ‚úÖ –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üìû –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–∫–∞–∑—ã –≤–∏—Å—è—Ç –≤ —Å—Ç–∞—Ç—É—Å–µ `pending`  
**–†–µ—à–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π Result URL –≤ Robokassa

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram  
**–†–µ—à–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π webhook –∏ –æ—Ç–ø—Ä–∞–≤—å `/admin_join`

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∞–π—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è  
**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+Shift+R), –±–∏–ª–¥ –∑–∞–≤–µ—Ä—à—ë–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã:**  
https://functions.poehali.dev/69414de5-6ce0-4acb-a3e4-460b4216a09b

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook:**  
https://functions.poehali.dev/aa1ac8a7-52d8-4fd3-b9f3-54fae1e02751?action=setup_webhook

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

1. **–ù–∞—Å—Ç—Ä–æ–π Result URL –≤ Robokassa** (—Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ!)
2. –ù–∞—Å—Ç—Ä–æ–π Telegram webhook
3. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ –±–æ—Ç—É
4. –°–¥–µ–ª–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
5. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Å–µ –∑–∞–∫–∞–∑—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è, –∏ —Ç—ã –±—É–¥–µ—à—å –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è! üöÄ
